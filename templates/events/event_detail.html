{% extends "base.html" %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <div style="margin-bottom: 1rem;">
        <a href="{% url 'event_list' %}" style="color: #3498db; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem;">
            ‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
        </a>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è -->
    <div style="background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); margin-bottom: 2rem;">
        <h1 style="color: #2c3e50; margin-bottom: 1rem; border-bottom: 2px solid #ecf0f1; padding-bottom: 1rem;">
            {{ event.title }}
        </h1>
        
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px;">
                <strong style="color: #7f8c8d; display: block; margin-bottom: 0.5rem;">üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è</strong>
                <span style="color: #2c3e50; font-weight: 500;">{{ event.category.name }}</span>
            </div>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px;">
                <strong style="color: #7f8c8d; display: block; margin-bottom: 0.5rem;">üìÖ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</strong>
                <span style="color: #2c3e50; font-weight: 500;">{{ event.event_date|date:"d.m.Y H:i" }}</span>
            </div>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px;">
                <strong style="color: #7f8c8d; display: block; margin-bottom: 0.5rem;">üìç –ú–µ—Å—Ç–æ</strong>
                <span style="color: #2c3e50; font-weight: 500;">{{ event.location }}</span>
            </div>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 6px;">
                <strong style="color: #7f8c8d; display: block; margin-bottom: 0.5rem;">üë• –í–æ–ª–æ–Ω—Ç–µ—Ä—ã</strong>
                <span style="color: #2c3e50; font-weight: 500;">{{ event.required_volunteers }} —Ç—Ä–µ–±—É–µ—Ç—Å—è</span>
            </div>
        </div>

        <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
        <div style="margin-bottom: 2rem;">
            <h3 style="color: #2c3e50; margin-bottom: 1rem;">üìñ –û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
            <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 6px; line-height: 1.6; white-space: pre-line;">
                {{ event.description }}
            </div>
        </div>

        <!-- –ë–ª–æ–∫ –∑–∞—è–≤–∫–∏ -->
        <div style="background: #e3f2fd; padding: 1.5rem; border-radius: 8px;">
            <h3 style="color: #1976d2; margin-bottom: 1rem;">üéØ –£—á–∞—Å—Ç–∏–µ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏</h3>
            
            {% if user.is_authenticated %}
                {% if user_application %}
                    <div style="background: #e8f5e8; padding: 1rem; border-radius: 5px;">
                        <p style="color: #27ae60; margin: 0; display: flex; align-items: center; gap: 0.5rem;">
                            ‚úÖ <strong>–í–∞—à —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏:</strong> {{ user_application.get_status_display }}
                        </p>
                        {% if user_application.message %}
                        <p style="color: #7f8c8d; margin: 0.5rem 0 0 0; font-size: 0.9rem;">
                            <strong>–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</strong> {{ user_application.message }}
                        </p>
                        {% endif %}
                    </div>
                {% else %}
                    <p style="color: #2c3e50; margin-bottom: 1rem;">
                        –•–æ—Ç–∏—Ç–µ —Å—Ç–∞—Ç—å –≤–æ–ª–æ–Ω—Ç–µ—Ä–æ–º –Ω–∞ —ç—Ç–æ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏? –ü–æ–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É!
                    </p>
                    <a href="{% url 'apply_for_event' event.id %}" class="btn btn-success">
                        üéØ –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤–æ–ª–æ–Ω—Ç–µ—Ä–æ–º
                    </a>
                {% endif %}
            {% else %}
                <div style="text-align: center;">
                    <p style="color: #e74c3c; margin-bottom: 1rem; font-weight: 500;">
                        üîí –î–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ
                    </p>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <a href="{% url 'register' %}" class="btn btn-success">
                            üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                        </a>
                        <a href="{% url 'login' %}" class="btn btn-primary">
                            üîë –í–æ–π—Ç–∏
                        </a>
                    </div>
                    <p style="color: #7f8c8d; margin-top: 1rem; font-size: 0.9rem;">
                        –ì–æ—Å—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
                    </p>
                </div>
            {% endif %}
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #ecf0f1;">
            <div style="display: flex; justify-content: space-between; color: #7f8c8d; font-size: 0.9rem; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <strong>–û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä:</strong> {{ event.organizer.username }}
                </div>
                <div>
                    <strong>–°–æ–∑–¥–∞–Ω–æ:</strong> {{ event.created_at|date:"d.m.Y H:i" }}
                </div>
                <div>
                    <strong>–û–±–Ω–æ–≤–ª–µ–Ω–æ:</strong> {{ event.updated_at|date:"d.m.Y H:i" }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}